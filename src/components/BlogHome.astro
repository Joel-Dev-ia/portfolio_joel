---
import Title from "../components/atoms/Title.astro";
import { getCollection } from 'astro:content';
import Boton from "./atoms/Boton.astro";
import FormattedDate from "./FormattedDate.astro";
import CardBlog from "./CardBlog.astro";

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<section id="blog" class="flex flex-col items-center w-full h-full justify-center px-4 flex-wrap">

  <Title contenido="Mes crÃ©as  " margin="2rem" />

  <div class="flex flex-col md:flex-row justify-center gap-[20px] min-w-[30rem] max-w-full self-center flex-wrap">
    {
      posts.slice(0, 3).map((post) => (
        <CardBlog
          title={post.data.title}
          content={post.data.description}
          img={post.data.heroImage}
          href={`/blog/${post.slug}/`}
        >
          <FormattedDate slot="date" clase="text-white" date={post.data.pubDate} />
        </CardBlog>
      ))
    }
  </div>

  <div class="flex justify-center mt-5 px-3 w-full">
    <Boton href="/blog" texto="Voir plus" />
  </div>

</section>
